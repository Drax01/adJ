<<<<<<< HEAD
$OpenBSD: patch-content_renderer_devtools_v8_sampling_profiler_cc,v 1.5 2016/07/31 13:11:44 robert Exp $
--- content/renderer/devtools/v8_sampling_profiler.cc.orig.port	Wed Jul 20 21:03:24 2016
+++ content/renderer/devtools/v8_sampling_profiler.cc	Thu Jul 21 10:25:30 2016
@@ -20,7 +20,7 @@
=======
$OpenBSD: patch-content_renderer_devtools_v8_sampling_profiler_cc,v 1.4 2016/05/27 06:28:21 robert Exp $
--- content/renderer/devtools/v8_sampling_profiler.cc.orig.port	Wed May 25 21:01:01 2016
+++ content/renderer/devtools/v8_sampling_profiler.cc	Thu May 26 08:09:46 2016
@@ -21,7 +21,7 @@
>>>>>>> 7e8581aadfac3773e05d83a662dae23a33c44e10
 #include "content/renderer/render_thread_impl.h"
 #include "v8/include/v8.h"
 
-#if defined(OS_POSIX)
+#if defined(OS_POSIX) && !defined(OS_BSD)
 #include <signal.h>
 #define USE_SIGNALS
 #endif
<<<<<<< HEAD
@@ -204,7 +204,10 @@ class Sampler {
=======
@@ -205,7 +205,10 @@ class Sampler {
>>>>>>> 7e8581aadfac3773e05d83a662dae23a33c44e10
   static const unsigned kNumberOfSamples = 10;
   typedef LockFreeCircularQueue<SampleRecord, kNumberOfSamples> SamplingQueue;
 
+#ifdef USE_SIGNALS
   PlatformData platform_data_;
+#endif
+
   Isolate* isolate_;
   std::unique_ptr<SamplingQueue> samples_data_;
   base::subtle::Atomic32 code_added_events_count_;
<<<<<<< HEAD
@@ -298,6 +301,7 @@ void Sampler::DoSample(const v8::RegisterState& state)
=======
@@ -299,6 +302,7 @@ void Sampler::DoSample(const v8::RegisterState& state)
>>>>>>> 7e8581aadfac3773e05d83a662dae23a33c44e10
 }
 
 void Sampler::InjectPendingEvents() {
+#ifdef USE_SIGNALS
   SampleRecord* record = samples_data_->Peek();
   while (record) {
     TRACE_EVENT_SAMPLE_WITH_TID_AND_TIMESTAMP1(
<<<<<<< HEAD
@@ -309,6 +313,7 @@ void Sampler::InjectPendingEvents() {
=======
@@ -310,6 +314,7 @@ void Sampler::InjectPendingEvents() {
>>>>>>> 7e8581aadfac3773e05d83a662dae23a33c44e10
     record = samples_data_->Peek();
     base::subtle::NoBarrier_AtomicIncrement(&samples_count_, 1);
   }
+#endif
 }
 
 // static
